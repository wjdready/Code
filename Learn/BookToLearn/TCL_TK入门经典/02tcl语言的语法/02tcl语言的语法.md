

tcl 语法，其内容是决定如何解析命令的十多条规则。在此基础上 tcl 提供了大约 100 条内建命令，tk 另外提供了几十条。

## 处理命令

tcl 处理一个命令分为两步: 解析和执行

在解析阶段，tcl 将命令分解为单词，并执行替换。

在执行阶段，命令的各个单词都具有了意义，tcl 把第一个单词作为命令名称，检查这个命令是否已经定义，并且查找完成该命令功能的命令过程。如果命令已经定义，tcl 解释器就调用该命令过程，把命令的全部单词传递给该过程，命令过程会根据自己需要来分辨这些单词的意义。

## 变量替换

tcl 提供了三种替换形式

变量替换， 命令替换和反斜线替换。每种替换都会把单词中的一些原始字符串替换为另一些值。

tcl解释器在执行命令过程之前进行这些替换。

替换可以发生在命令中的任何一个单词上，包括命令本身。

```sh
# 替换也可以用来产生新的变量, 例如生成 5 个按钮组件
foreach num {1 2 3 4 5} {
    button .b$num
}
```

命令替换可以把一个单词的部分或全部替换为一个命令的结果。命令替换通过方括号表示，括号和其中所有内容都会被替换为其执行的结果。

```sh
set kgrams 20
set 1bs [expr $kgrams * 2.2046]
```

方括号中的脚本可以包含任意多条命令，命令之间可以用换行符分隔，也可用分号分开。

反斜线替换

```sh
# 反斜线 + 空格会被替换为空格
set msg Hello\ World\nGood

# 反斜线 + 换行符 + 下一行开头的空白会被替换为一个空格字符
set msg "Hello\ World\
        \nGood"
```
