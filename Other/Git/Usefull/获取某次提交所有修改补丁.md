
generate_patches.sh

```sh
#!/bin/bash

# 目标提交哈希值，可根据实际情况修改
COMMIT_HASH="3917cc794ed4143061e97efea4cbe89567b086ad"
# 输出文件夹，可根据实际情况修改
OUTPUT_DIR="patches"

# 创建输出文件夹
mkdir -p "$OUTPUT_DIR"

# 获取指定提交中修改的文件列表
files=$(git diff-tree --no-commit-id --name-only -r "$COMMIT_HASH")

# 遍历每个文件，生成对应的 patch 文件
for file in $files; do
    # 创建文件所在的目录结构
    file_dir=$(dirname "$file")
    mkdir -p "$OUTPUT_DIR/$file_dir"
    
    # 提取文件名
    file_name=$(basename "$file")
    # 生成 patch 文件路径
    patch_file="$OUTPUT_DIR/$file_dir/${file_name}.patch"
    
    # 生成 patch 文件
    git diff "$COMMIT_HASH"^ "$COMMIT_HASH" -- "$file" > "$patch_file"
done

echo "Patch files generated in $OUTPUT_DIR"
```
